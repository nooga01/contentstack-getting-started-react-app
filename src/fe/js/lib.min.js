"use strict";function _typeof(a){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof(a)}!function(a,t){void 0===t&&i("Pagination requires jQuery.");var e="pagination",o="__pagination-",n=(t.fn.pagination&&i('plugin conflicted, the name "pagination" has been taken by another jQuery plugin.'),t.fn[e]=function(c){if(void 0!==c){var s,l=t(this),u=t.extend({},t.fn[e].defaults,c),g={initialize:function(){var a,e=this;l.data("pagination")||l.data("pagination",{}),!1!==e.callHook("beforeInit")&&(l.data("pagination").initialized&&t(".paginationjs",l).remove(),e.disabled=!!u.disabled,a=e.model={pageRange:u.pageRange,pageSize:u.pageSize},e.parseDataSource(u.dataSource,(function(t){e.isAsync=n.isString(t),n.isArray(t)&&(a.totalNumber=u.totalNumber=t.length),e.isDynamicTotalNumber=e.isAsync&&u.totalNumberLocator,t=e.render(!0),u.className&&t.addClass(u.className),a.el=t,l["bottom"===u.position?"append":"prepend"](t),e.observer(),l.data("pagination").initialized=!0,e.callHook("afterInit",t)})))},render:function(a){var e=this,o=(n=e.model).el||t('<div class="paginationjs"></div>'),n=(a=!0!==a,e.callHook("beforeRender",a),n.pageNumber||u.pageNumber),i=u.pageRange||0,r=e.getTotalPage(),c=n-i,s=n+i;return(c=r<s&&(c=(s=r)-2*i)<1?1:c)<=1&&(c=1,s=Math.min(2*i+1,r)),o.html(e.generateHTML({currentPage:n,pageRange:i,rangeStart:c,rangeEnd:s})),u.hideOnlyOnePage&&o[r<=1?"hide":"show"](),e.callHook("afterRender",a),o},getPageLinkTag:function(a){var t=u.pageLink;return t?'<a href="'.concat(t,'">').concat(a,"</a>"):"<a>".concat(a,"</a>")},generatePageNumbersHTML:function(a){var t,e=a.currentPage,o=this.getTotalPage(),n=this.getPageLinkTag,i=a.rangeStart,r=a.rangeEnd,c="",s=(a=u.ellipsisText,u.classPrefix),l=u.pageClassName||"",g=u.activeClassName||"",p=u.disableClassName||"";if(null===u.pageRange)for(t=1;t<=o;t++)c+=t==e?'<li class="'.concat(s,"-page J-paginationjs-page ").concat(l," ").concat(g,'" data-num="').concat(t,'"><a>').concat(t,"</a></li>"):'<li class="'.concat(s,"-page J-paginationjs-page ").concat(l,'" data-num="').concat(t,'">').concat(n(t),"</li>");else{if(i<=3)for(t=1;t<i;t++)c+=t==e?'<li class="'.concat(s,"-page J-paginationjs-page ").concat(l," ").concat(g,'" data-num="').concat(t,'"><a>').concat(t,"</a></li>"):'<li class="'.concat(s,"-page J-paginationjs-page ").concat(l,'" data-num="').concat(t,'">').concat(n(t),"</li>");else u.hideFirstOnEllipsisShow||(c+='<li class="'.concat(s,"-page ").concat(s,"-first J-paginationjs-page ").concat(l,'" data-num="1">').concat(n(1),"</li>")),c+='<li class="'.concat(s,"-ellipsis ").concat(p,'"><a>').concat(a,"</a></li>");for(t=i;t<=r;t++)c+=t==e?'<li class="'.concat(s,"-page J-paginationjs-page ").concat(l," ").concat(g,'" data-num="').concat(t,'"><a>').concat(t,"</a></li>"):'<li class="'.concat(s,"-page J-paginationjs-page ").concat(l,'" data-num="').concat(t,'">').concat(n(t),"</li>");if(o-2<=r)for(t=r+1;t<=o;t++)c+='<li class="'.concat(s,"-page J-paginationjs-page ").concat(l,'" data-num="').concat(t,'">').concat(n(t),"</li>");else c+='<li class="'.concat(s,"-ellipsis ").concat(p,'"><a>').concat(a,"</a></li>"),u.hideLastOnEllipsisShow||(c+='<li class="'.concat(s,"-page ").concat(s,"-last J-paginationjs-page ").concat(l,'" data-num="').concat(o,'">').concat(n(o),"</li>"))}return c},generateHTML:function(a){var t,e=this,o=a.currentPage,i=e.getTotalPage(),r=e.getPageLinkTag,c=e.getTotalNumber(),s=u.pageSize,l=u.showPrevious,g=u.showNext,p=u.showPageNumbers,f=u.showNavigator,d=u.showSizeChanger,m=u.sizeChangerOptions,b=u.showGoInput,h=u.showGoButton,y=u.prevText,v=u.nextText,N=u.goButtonText,k=u.classPrefix,P=u.disableClassName||"",S=u.ulClassName||"",x=u.prevClassName||"",j=u.nextClassName||"",T="",C='<select class="J-paginationjs-size-select">',H='<input type="text" class="J-paginationjs-go-pagenumber">',w=(N='<input type="button" class="J-paginationjs-go-button" value="'.concat(N,'">'),"function"==typeof u.formatSizeChanger?u.formatSizeChanger(o,i,c):u.formatSizeChanger),O="function"==typeof u.formatNavigator?u.formatNavigator(o,i,c):u.formatNavigator,z="function"==typeof u.formatGoInput?u.formatGoInput(H,o,i,c):u.formatGoInput,L="function"==typeof u.formatGoButton?u.formatGoButton(N,o,i,c):u.formatGoButton,E="function"==typeof u.autoHidePrevious?u.autoHidePrevious():u.autoHidePrevious,J="function"==typeof u.autoHideNext?u.autoHideNext():u.autoHideNext,D="function"==typeof u.header?u.header(o,i,c):u.header,I="function"==typeof u.footer?u.footer(o,i,c):u.footer;if(D&&(T+=t=e.replaceVariables(D,{currentPage:o,totalPage:i,totalNumber:c})),f&&O&&(T+='<div class="'.concat(k,'-nav J-paginationjs-nav">').concat(t=e.replaceVariables(O,{currentPage:o,totalPage:i,totalNumber:c,rangeStart:(o-1)*s+1,rangeEnd:Math.min(o*s,c)}),"</div>")),(l||p||g)&&(T=T+'<div class="paginationjs-pages">'+(S?'<ul class="'.concat(S,'">'):"<ul>"),l&&(o<=1?E||(T+='<li class="'.concat(k,"-prev ").concat(P," ").concat(x,'"><a>').concat(y,"</a></li>")):T+='<li class="'.concat(k,"-prev J-paginationjs-previous ").concat(x,'" data-num="').concat(o-1,'" title="Previous page">').concat(r(y),"</li>")),p&&(T+=e.generatePageNumbersHTML(a)),g&&(i<=o?J||(T+='<li class="'.concat(k,"-next ").concat(P," ").concat(j,'"><a>').concat(v,"</a></li>")):T+='<li class="'.concat(k,"-next J-paginationjs-next ").concat(j,'" data-num="').concat(o+1,'" title="Next page">').concat(r(v),"</li>")),T+="</ul></div>"),d&&n.isArray(m)){-1===m.indexOf(s)&&(m.unshift(s),m.sort((function(a,t){return a-t})));for(var R=0;R<m.length;R++)C+='<option value="'.concat(m[R],'"').concat(m[R]===s?" selected":"",">").concat(m[R]," / page</option>");t=C+="</select>",T+='<div class="paginationjs-size-changer">'.concat(t=w?e.replaceVariables(w,{length:C,total:c}):t,"</div>")}return b&&z&&(T+='<div class="'.concat(k,'-go-input">').concat(t=e.replaceVariables(z,{currentPage:o,totalPage:i,totalNumber:c,input:H}),"</div>")),h&&L&&(T+='<div class="'.concat(k,'-go-button">').concat(t=e.replaceVariables(L,{currentPage:o,totalPage:i,totalNumber:c,button:N}),"</div>")),I&&(T+=t=e.replaceVariables(I,{currentPage:o,totalPage:i,totalNumber:c})),T},findTotalNumberFromRemoteResponse:function(a){this.model.totalNumber=u.totalNumberLocator(a)},go:function(a,e){var o,i,r,c,s=this,g=s.model;function p(a){var o;!1!==s.callHook("beforePaging",c)&&(g.direction=void 0===g.pageNumber?0:c>g.pageNumber?1:-1,g.pageNumber=c,s.render(),s.disabled&&s.isAsync&&s.enable(),l.data("pagination").model=g,u.formatResult&&(o=t.extend(!0,[],a),n.isArray(a=u.formatResult(o))||(a=o)),l.data("pagination").currentPageData=a,s.doCallback(a,e),s.callHook("afterPaging",c),1==c?s.callHook("afterIsFirstPage"):c==s.getTotalPage()&&s.callHook("afterIsLastPage"))}s.disabled||(c=a,!(c=parseInt(c)))||c<1||(a=u.pageSize,i=s.getTotalNumber(),r=s.getTotalPage(),0<i&&r<c)||(s.isAsync?(r=(i=u.alias||{}).pageSize||"pageSize",i=i.pageNumber||"pageNumber",(o={})[r]=a,o[i]=c,(r="function"==typeof u.ajax?u.ajax():u.ajax)&&r.pageNumberStartWithZero&&(o[i]=c-1),t.extend(!0,a={type:"get",cache:!1,data:{},contentType:"application/x-www-form-urlencoded; charset=UTF-8",dataType:"json",async:!0},r),t.extend(a.data,o),a.url=u.dataSource,a.success=function(a){try{s.model.originalResponse=a,s.isDynamicTotalNumber?s.findTotalNumberFromRemoteResponse(a):s.model.totalNumber=u.totalNumber,p(s.filterDataWithLocator(a))}catch(a){if("function"!=typeof u.onError)throw a;u.onError(a,"ajaxSuccessHandlerError")}},a.error=function(a,t,e){u.formatAjaxError&&u.formatAjaxError(a,t,e),s.enable()},s.disable(),u.ajaxFunction?u.ajaxFunction(a):t.ajax(a)):p(s.getPagingData(c)))},doCallback:function(a,t){var e=this.model;"function"==typeof t?t(a,e):"function"==typeof u.callback&&u.callback(a,e)},destroy:function(){!1!==this.callHook("beforeDestroy")&&(this.model.el.remove(),l.off(),t("#paginationjs-style").remove(),this.callHook("afterDestroy"))},previous:function(a){this.go(this.model.pageNumber-1,a)},next:function(a){this.go(this.model.pageNumber+1,a)},disable:function(){var a=this,t=a.isAsync?"async":"sync";!1!==a.callHook("beforeDisable",t)&&(a.disabled=!0,a.model.disabled=!0,a.callHook("afterDisable",t))},enable:function(){var a=this,t=a.isAsync?"async":"sync";!1!==a.callHook("beforeEnable",t)&&(a.disabled=!1,a.model.disabled=!1,a.callHook("afterEnable",t))},refresh:function(a){this.go(this.model.pageNumber,a)},show:function(){this.model.el.is(":visible")||this.model.el.show()},hide:function(){this.model.el.is(":visible")&&this.model.el.hide()},replaceVariables:function(a,t){for(var e in t)var o=t[e],n=(e=new RegExp("<%=\\s*"+e+"\\s*%>","img"),(n||a).replace(e,o));return n},getPagingData:function(a){var t=u.pageSize,e=u.dataSource,o=this.getTotalNumber(),n=t*(a-1)+1;a=Math.min(a*t,o);return e.slice(n-1,a)},getTotalNumber:function(){return this.model.totalNumber||u.totalNumber||0},getTotalPage:function(){return Math.ceil(this.getTotalNumber()/u.pageSize)},getLocator:function(a){var t;return"string"==typeof a?t=a:"function"==typeof a?t=a():i('"locator" is incorrect. Expect string or function type.'),t},filterDataWithLocator:function(a){var e,o=this.getLocator(u.locator);if(n.isObject(a)){try{t.each(o.split("."),(function(t,o){e=(e||a)[o]}))}catch(o){}e?n.isArray(e)||i("dataSource."+o+" should be an Array."):i("dataSource."+o+" is undefined.")}return e||a},parseDataSource:function(a,t){var e=this;n.isObject(a)?t(u.dataSource=e.filterDataWithLocator(a)):n.isArray(a)?t(u.dataSource=a):"function"==typeof a?u.dataSource((function(a){n.isArray(a)||i('The parameter of "done" Function should be an Array.'),e.parseDataSource.call(e,a,t)})):"string"==typeof a?(/^https?|file:/.test(a)&&(u.ajaxDataType="jsonp"),t(a)):i("Unexpected dataSource type")},callHook:function(e){var o,n=l.data("pagination")||{},i=Array.prototype.slice.apply(arguments);return i.shift(),u[e]&&"function"==typeof u[e]&&!1===u[e].apply(a,i)&&(o=!1),n.hooks&&n.hooks[e]&&t.each(n.hooks[e],(function(t,e){!1===e.apply(a,i)&&(o=!1)})),!1!==o},observer:function(){var a=this,e=a.model.el,n=(l.on(o+"go",(function(t,e,o){(e="string"==typeof e?parseInt(e.trim()):e)&&("number"!=typeof e&&i('"pageNumber" is incorrect. (Number)'),a.go(e,o))})),e.on("click",".J-paginationjs-page",(function(e){var o=t(e.currentTarget),n=o.attr("data-num").trim();if(n&&!o.hasClass(u.disableClassName)&&!o.hasClass(u.activeClassName))return!1!==a.callHook("beforePageOnClick",e,n)&&(a.go(n),a.callHook("afterPageOnClick",e,n),!!u.pageLink)&&void 0})),e.on("click",".J-paginationjs-previous",(function(e){var o=t(e.currentTarget),n=o.attr("data-num").trim();if(n&&!o.hasClass(u.disableClassName))return!1!==a.callHook("beforePreviousOnClick",e,n)&&(a.go(n),a.callHook("afterPreviousOnClick",e,n),!!u.pageLink)&&void 0})),e.on("click",".J-paginationjs-next",(function(e){var o=t(e.currentTarget),n=o.attr("data-num").trim();if(n&&!o.hasClass(u.disableClassName))return!1!==a.callHook("beforeNextOnClick",e,n)&&(a.go(n),a.callHook("afterNextOnClick",e,n),!!u.pageLink)&&void 0})),e.on("click",".J-paginationjs-go-button",(function(n){var i=t(".J-paginationjs-go-pagenumber",e).val();if(!1===a.callHook("beforeGoButtonOnClick",n,i))return!1;l.trigger(o+"go",i),a.callHook("afterGoButtonOnClick",n,i)})),e.on("keyup",".J-paginationjs-go-pagenumber",(function(n){if(13===n.which){var i=t(n.currentTarget).val();if(!1===a.callHook("beforeGoInputOnEnter",n,i))return!1;l.trigger(o+"go",i),t(".J-paginationjs-go-pagenumber",e).focus(),a.callHook("afterGoInputOnEnter",n,i)}})),e.on("change",".J-paginationjs-size-select",(function(e){var o=t(e.currentTarget),n=(o=parseInt(o.val()),a.model.pageNumber||u.pageNumber);if("number"==typeof o)return!1!==a.callHook("beforeSizeSelectorChange",e,o)&&(u.pageSize=o,a.model.pageSize=o,a.model.totalPage=a.getTotalPage(),n>a.model.totalPage&&(n=a.model.totalPage),a.go(n),a.callHook("afterSizeSelectorChange",e,o),!!u.pageLink)&&void 0})),l.on(o+"previous",(function(t,e){a.previous(e)})),l.on(o+"next",(function(t,e){a.next(e)})),l.on(o+"disable",(function(){a.disable()})),l.on(o+"enable",(function(){a.enable()})),l.on(o+"refresh",(function(t,e){a.refresh(e)})),l.on(o+"show",(function(){a.show()})),l.on(o+"hide",(function(){a.hide()})),l.on(o+"destroy",(function(){a.destroy()})),Math.max(a.getTotalPage(),1)),r=u.pageNumber;a.isDynamicTotalNumber&&u.resetPageNumberOnInit&&(r=1),u.triggerPagingOnInit&&l.trigger(o+"go",Math.min(r,n))}};if(l.data("pagination")&&!0===l.data("pagination").initialized){if(r(c))return l.trigger.call(this,o+"go",c,arguments[1]),this;if("string"==typeof c){var p=Array.prototype.slice.apply(arguments);switch(p[0]=o+p[0],c){case"previous":case"next":case"go":case"disable":case"enable":case"refresh":case"show":case"hide":case"destroy":l.trigger.apply(this,p);break;case"getSelectedPageNum":case"getCurrentPageNum":return(l.data("pagination").model?l.data("pagination").model:l.data("pagination").attributes).pageNumber;case"getTotalPage":return Math.ceil(l.data("pagination").model.totalNumber/l.data("pagination").model.pageSize);case"getSelectedPageData":case"getCurrentPageData":return l.data("pagination").currentPageData;case"isDisabled":return!0===l.data("pagination").model.disabled;default:i("Unknown action: "+c)}return this}s=l,t.each(["go","previous","next","disable","enable","refresh","show","hide","destroy"],(function(a,t){s.off(o+t)})),s.data("pagination",{}),t(".paginationjs",s).remove()}else n.isObject(c)||i("Illegal options");var f=u;f.dataSource||i('"dataSource" is required.'),"string"==typeof f.dataSource?void 0===f.totalNumberLocator?void 0===f.totalNumber?i('"totalNumber" is required.'):r(f.totalNumber)||i('"totalNumber" is incorrect. Expect numberic type'):"function"!=typeof f.totalNumberLocator&&i('"totalNumberLocator" should be a Function.'):n.isObject(f.dataSource)&&(void 0===f.locator?i('"dataSource" is an Object, please specify a "locator".'):"string"!=typeof f.locator&&"function"!=typeof f.locator&&i(f.locator+" is incorrect. Expect string or function type")),void 0!==f.formatResult&&"function"!=typeof f.formatResult&&i('"formatResult" should be a Function.'),void 0!==f.onError&&"function"!=typeof f.onError&&i('"onError" should be a Function.'),g.initialize()}return this},t.fn[e].defaults={totalNumber:0,pageNumber:1,pageSize:10,pageRange:2,showPrevious:!0,showNext:!0,showPageNumbers:!0,showNavigator:!1,showGoInput:!1,showGoButton:!1,showSizeChanger:!1,sizeChangerOptions:[10,20,50,100],pageLink:"",prevText:"&lsaquo;",nextText:"&rsaquo;",ellipsisText:"...",goButtonText:"Go",classPrefix:"paginationjs",activeClassName:"active",disableClassName:"disabled",formatNavigator:"Total <%= totalNumber %> items",formatGoInput:"<%= input %>",formatGoButton:"<%= button %>",position:"bottom",autoHidePrevious:!1,autoHideNext:!1,triggerPagingOnInit:!0,resetPageNumberOnInit:!0,hideOnlyOnePage:!1,hideFirstOnEllipsisShow:!1,hideLastOnEllipsisShow:!1,callback:function(){}},t.fn.addHook=function(a,e){arguments.length<2&&i("Expect 2 arguments at least."),"function"!=typeof e&&i("callback should be a function.");var o=t(this),n=o.data("pagination");n||(o.data("pagination",{}),n=o.data("pagination")),n.hooks||(n.hooks={}),n.hooks[a]=n.hooks[a]||[],n.hooks[a].push(e)},t[e]=function(a,e){var o;if(arguments.length<2&&i("Requires two parameters."),(o="string"!=typeof a&&a instanceof jQuery?a:t(a)).length)return o.pagination(e),o},{});function i(a){throw new Error("Pagination: "+a)}function r(a){return!isNaN(parseFloat(a))&&isFinite(a)}t.each(["Object","Array","String"],(function(a,t){n["is"+t]=function(a){return("object"==(e=_typeof(a))?null==a?"null":Object.prototype.toString.call(a).slice(8,-1):e).toLowerCase()===t.toLowerCase();var e}})),"function"==typeof define&&define.amd&&define((function(){return t}))}(void 0,window.jQuery);